<?xml version="1.0" encoding="UTF-8"?>
<Module>
	<ModulePrefs title="Vz-Function Gadget" author_email="teggert@studivz.net">
		<Require feature="opensocial-0.8" />
		<Require feature="views" />
		<Require feature="cache" />
		<Require feature="tabs" />
		<Require feature="advertising" />
		<Require feature="embed" />
		<Require feature="invite" />
	</ModulePrefs>


<Content type="html" view="profile,canvas"><![CDATA[

<script type="text/javascript">
var gadgetId = '__MODULE_ID__';

var environment = '__ENV_CONTAINER__';

gadgets.util.registerOnLoadHandler(function() {
	gadgets.cache.getCachedJs([
			'lib/jquery-1.4.2.min.js',
			'js/advertising.js',
			'js/embedding.js',
			'js/invite.js',
			'js/messaging.js',
            'js/iframe.js',
            'js/various.js',
            'js/profile_image.js',
			'vz_functions.js'
		],
		'vzDemo.controller.init');
    document.getElementById('params').innerHTML = '1:' + gadgets.views.getParams()['param1'] + ' 2:' + gadgets.views.getParams()['param2'];
});
</script>

<!-- The code for Profile view is here. -->
<div id="content" style="display: none">
	<div id="messaging">
		<textarea id="message" rows="3">asdasd</textarea>
		<ul>
			<li><a id="privMessage" href="javascript:;">send private message</a></li>
	    	<li><a id="wallpost" href="javascript:;">post to wall</a></li>
			<li><a id="notification" href="javascript:;">send notification</a></li>
			<li><a id="statusUpdate" href="javascript:;">send status update</a></li>
		</ul>
		
	</div>
	<div id="embedding">
		<ul>
			<li><a id="getEmbedUrl" href="javascript:;">get embed Url</a></li>
            <li><a id="getStaticUrl" href="javascript:;">get static url</a></li>
		</ul>
	</div>
	<div id="invite">
		<ul>
			<li><a id="paymentInterstitial" href="javascript:;">get payment interstitial</a></li>
			<li><a id="inviteFriends" href="javascript:;">invite friends</a></li>
		</ul>
	</div>
	<div id="advertising">
		<ul>
			<li><a id="adTag" href="javascript:;">get ad tag</a></li>
	    	<li><a id="paymentInterstitial" href="javascript:;">request payment interstitial</a></li>
		</ul>	
	</div>
	<div id="various">
		<input id="jsonParams" name="jsonParams" value="" />
		<ul>
			<li><a id="requestNavigateTo" href="javascript:;">requestNavigateTo</a></li>
		</ul>
	</div>
    <div id="profile_image">
		<ul>
			<li><a id="changeProfileImage" href="javascript:;">changeProfileImage</a></li>
		</ul>
	</div>
    <div id="iframe">
        <iframe id="myiframe"></iframe>
        <a id="fillIframe" href="javascript:;">fill iframe</a>
        <p>Iframe RPC Response:</p>
        <p id="iframe_response"></p>
    </div>
    <div id="params"></div>
</div>
  ]]></Content>
	<Content type="html" view="group,preview"><![CDATA[

    <h2>Installiere diesen Hingucker und beschenke deine Freunde</h2>
    <div id="params"></div>
    <a href="javascript:;" onclick="vz.invite.install({param1: 'abc', param2: 'def'});">install</a>
	<script type="text/javascript">
		gadgets.util.registerOnLoadHandler(function() {
			document.getElementById('params').innerHTML = '1:' + gadgets.views.getParams()['param1'] + ' 2:' + gadgets.views.getParams()['param2'];
		});
	</script>

  ]]></Content>
<Content type="html" view="embedprovider">
<![CDATA[
    <input type="text" id="__MODULE_ID__img" />
	<input type="text" id="__MODULE_ID__msg" />
    <a href="javascript:sendMessage()">senden</a>

    <script type="text/javascript">

		function sendMessage()
		{
	        var params = {img: document.getElementById('__MODULE_ID__img').value, msg:document.getElementById('__MODULE_ID__msg').value};
	        vz.embed.getEmbedUrl(params, function(url) {
		    	vz.embed.send(url);
	        });
		}

	</script>
]]>
</Content>
<Content type="html" view="embed">
<![CDATA[
	<h1>Embedded</h1>
	<div id="__MODULE_ID__Greeting"></div>
	<script type="text/javascript">
		gadgets.util.registerOnLoadHandler(function() {
			document.getElementById('__MODULE_ID__Greeting').innerHTML = 'img: ' + gadgets.views.getParams()['img'] + '<br />msg:' + gadgets.views.getParams()['msg'];
		});
	</script>
]]>
</Content>
</Module>